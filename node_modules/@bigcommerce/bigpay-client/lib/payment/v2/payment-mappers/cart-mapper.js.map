{"version":3,"sources":["../../../../src/payment/v2/payment-mappers/cart-mapper.js"],"names":["CartMapper","data","cart","currency_code","currency","items","mapToItems","totals","mapToOrderTotals","map","discount_amount","itemData","integerDiscount","name","price","integerAmount","unit_price","integerUnitPrice","quantity","sku","tax_amount","integerTax","amount","integerAmountAfterDiscount","type","mapToType","discount_total","discount","grand_total","grandTotal","shipping_total","shipping","subtotal","surcharge_total","handling","tax_total","taxTotal","types","ItemPhysicalEntity","ItemDigitalEntity","ItemGiftCertificateEntity"],"mappings":";;;;;;;;AAAA;;;;IAEqBA,U;;;;;;;;;AAQjB;;;;kCAIUC,I,EAAM;AAAA,6BACUA,IADV,CACJC,IADI;AAAA,gBACJA,IADI,8BACG,EADH;;;AAGZ,mBAAO,oBAAQ;AACXC,+BAAeD,KAAKE,QADT;AAEXC,uBAAO,KAAKC,UAAL,CAAgBL,IAAhB,CAFI;AAGXM,wBAAQ,KAAKC,gBAAL,CAAsBP,IAAtB;AAHG,aAAR,CAAP;AAKH;;AAED;;;;;;;;mCAKWA,I,EAAM;AAAA;;AAAA,8BACoBA,IADpB,CACLC,IADK;AAAA,gBACLA,IADK,+BACE,EAAEG,OAAO,EAAT,EADF;;;AAGb,mBAAOH,KAAKG,KAAL,CAAWI,GAAX,CAAe;AAAA,uBAAY,oBAAQ;AACtCC,qCAAiBC,SAASC,eADY;AAEtCC,0BAAMF,SAASE,IAFuB;AAGtCC,2BAAOH,SAASI,aAHsB;AAItCC,gCAAYL,SAASM,gBAJiB;AAKtCC,8BAAUP,SAASO,QALmB;AAMtCC,yBAAKR,SAASQ,GANwB;AAOtCC,gCAAYT,SAASU,UAPiB;AAQtCC,4BAAQX,SAASY,0BARqB;AAStCC,0BAAM,MAAKC,SAAL,CAAed,QAAf;AATgC,iBAAR,CAAZ;AAAA,aAAf,CAAP;AAWH;;AAED;;;;;;;;yCAKiBV,I,EAAM;AAAA,8BACGA,IADH,CACXC,IADW;AAAA,gBACXA,IADW,+BACJ,EADI;;;AAGnB,mBAAO,oBAAQ;AACXwB,gCAAgBxB,KAAKyB,QAAL,GAAgBzB,KAAKyB,QAAL,CAAcZ,aAA9B,GAA8C,IADnD;AAEXa,6BAAa1B,KAAK2B,UAAL,GAAkB3B,KAAK2B,UAAL,CAAgBd,aAAlC,GAAkD,IAFpD;AAGXe,gCAAgB5B,KAAK6B,QAAL,GAAgB7B,KAAK6B,QAAL,CAAchB,aAA9B,GAA8C,IAHnD;AAIXiB,0BAAU9B,KAAK8B,QAAL,GAAgB9B,KAAK8B,QAAL,CAAcjB,aAA9B,GAA8C,IAJ7C;AAKXkB,iCAAiB/B,KAAKgC,QAAL,GAAgBhC,KAAKgC,QAAL,CAAcnB,aAA9B,GAA8C,IALpD;AAMXoB,2BAAWjC,KAAKkC,QAAL,GAAgBlC,KAAKkC,QAAL,CAAcrB,aAA9B,GAA8C;AAN9C,aAAR,CAAP;AAQH;;AAED;;;;;;;;kCAKUJ,Q,EAAU;AAChB,gBAAM0B,QAAQ;AACVC,oCAAoB,UADV;AAEVC,mCAAmB,SAFT;AAGVC,2CAA2B;AAHjB,aAAd;;AAMA,mBAAOH,MAAM1B,SAASa,IAAf,CAAP;AACH;;;;AAzED;;;iCAGgB;AACZ,mBAAO,IAAIxB,UAAJ,EAAP;AACH;;;;;;kBANgBA,U","file":"cart-mapper.js","sourcesContent":["import { omitNil } from '../../../common/utils';\n\nexport default class CartMapper {\n    /**\n     * @returns {CartMapper}\n     */\n    static create() {\n        return new CartMapper();\n    }\n\n    /**\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToCart(data) {\n        const { cart = {} } = data;\n\n        return omitNil({\n            currency_code: cart.currency,\n            items: this.mapToItems(data),\n            totals: this.mapToOrderTotals(data),\n        });\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object[]}\n     */\n    mapToItems(data) {\n        const { cart = { items: [] } } = data;\n\n        return cart.items.map(itemData => omitNil({\n            discount_amount: itemData.integerDiscount,\n            name: itemData.name,\n            price: itemData.integerAmount,\n            unit_price: itemData.integerUnitPrice,\n            quantity: itemData.quantity,\n            sku: itemData.sku,\n            tax_amount: itemData.integerTax,\n            amount: itemData.integerAmountAfterDiscount,\n            type: this.mapToType(itemData),\n        }));\n    }\n\n    /**\n     * @private\n     * @param {PaymentRequestData} data\n     * @returns {Object}\n     */\n    mapToOrderTotals(data) {\n        const { cart = {} } = data;\n\n        return omitNil({\n            discount_total: cart.discount ? cart.discount.integerAmount : null,\n            grand_total: cart.grandTotal ? cart.grandTotal.integerAmount : null,\n            shipping_total: cart.shipping ? cart.shipping.integerAmount : null,\n            subtotal: cart.subtotal ? cart.subtotal.integerAmount : null,\n            surcharge_total: cart.handling ? cart.handling.integerAmount : null,\n            tax_total: cart.taxTotal ? cart.taxTotal.integerAmount : null,\n        });\n    }\n\n    /**\n     * @private\n     * @param {Object} itemData\n     * @returns {Object}\n     */\n    mapToType(itemData) {\n        const types = {\n            ItemPhysicalEntity: 'physical',\n            ItemDigitalEntity: 'digital',\n            ItemGiftCertificateEntity: 'gift_card',\n        };\n\n        return types[itemData.type];\n    }\n}\n"]}